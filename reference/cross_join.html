<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cross Join — cross_join • flicker</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cross Join — cross_join" />
<meta property="og:description" content="The CROSS JOIN returns all combinations of x and y, i.e. the dataset which is the number of rows in the first
dataset multiplied by the number of rows in the second dataset. This kind of result is called the Cartesian Product." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flicker</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/nathaneastwood/flicker/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cross Join</h1>
    <small class="dont-index">Source: <a href='https://github.com/nathaneastwood/flicker/blob/master/R/cross_join.R'><code>R/cross_join.R</code></a></small>
    <div class="hidden name"><code>cross_join.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>CROSS JOIN</code> returns all combinations of <code>x</code> and <code>y</code>, i.e. the dataset which is the number of rows in the first
dataset multiplied by the number of rows in the second dataset. This kind of result is called the Cartesian Product.</p>
    </div>

    <pre class="usage"><span class='fu'>cross_join</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  copy <span class='op'>=</span> <span class='cn'>FALSE</span>,
  suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_x"</span>, <span class='st'>"_y"</span><span class='op'>)</span>,
  <span class='va'>...</span>,
  na_matches <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"never"</span>, <span class='st'>"na"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># S3 method for tbl_lazy</span>
<span class='fu'>cross_join</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  copy <span class='op'>=</span> <span class='cn'>FALSE</span>,
  suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_x"</span>, <span class='st'>"_y"</span><span class='op'>)</span>,
  <span class='va'>...</span>,
  na_matches <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"never"</span>, <span class='st'>"na"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># S3 method for data.frame</span>
<span class='fu'>cross_join</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  copy <span class='op'>=</span> <span class='cn'>FALSE</span>,
  suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_x"</span>, <span class='st'>"_y"</span><span class='op'>)</span>,
  <span class='va'>...</span>,
  na_matches <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"na"</span>, <span class='st'>"never"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x, y</th>
      <td><p>A pair of <code>tbl_spark</code>s or <code>data.frame</code>s.</p></td>
    </tr>
    <tr>
      <th>copy</th>
      <td><p>If <code>x</code> and <code>y</code> are not from the same data source,
and <code>copy</code> is <code>TRUE</code>, then <code>y</code> will be copied into a
temporary table in same database as <code>x</code>. <code>*_join()</code> will automatically
run <code>ANALYZE</code> on the created table in the hope that this will make
you queries as efficient as possible by giving more data to the query
planner.</p>
<p>This allows you to join tables across srcs, but it's potentially expensive
operation so you must opt into it.</p></td>
    </tr>
    <tr>
      <th>suffix</th>
      <td><p>If there are non-joined duplicate variables in <code>x</code> and
<code>y</code>, these suffixes will be added to the output to disambiguate them.
Should be a character vector of length 2.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters passed onto methods.</p></td>
    </tr>
    <tr>
      <th>na_matches</th>
      <td><p>Should NA (NULL) values match one another?
The default, "never", is how databases usually work. <code>"na"</code> makes
the joins behave like the dplyr join functions, <code><a href='https://rdrr.io/r/base/merge.html'>merge()</a></code>, <code><a href='https://rdrr.io/r/base/match.html'>match()</a></code>,
and <code><a href='https://rdrr.io/r/base/match.html'>%in%</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>From Spark 2.1 the prerequisite for using a cross join is that, <code>spark.sql.crossJoin.enabled</code> must be set to <code>true</code>,
otherwise an exception will be thrown. Cartesian products are very slow. More importantly, they could consume a lot
of memory and trigger an OOM. If the join type is not <code>Inner</code>, Spark SQL could use a Broadcast Nested Loop Join even
if both sides of tables are not small enough. Thus, it also could cause lots of unwanted network traffic.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id1"</span>, <span class='st'>"id2"</span>, <span class='st'>"id3"</span>, <span class='st'>"id4"</span>, <span class='st'>"id5"</span><span class='op'>)</span>,
  val <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>7</span>, <span class='fl'>11</span>, <span class='fl'>13</span>, <span class='fl'>17</span><span class='op'>)</span>,
  stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>
<span class='fu'>cross_join</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    id_x val_x id_y val_y
#&gt; 1   id1     2  id1     2
#&gt; 2   id1     2  id2     7
#&gt; 3   id1     2  id3    11
#&gt; 4   id1     2  id4    13
#&gt; 5   id1     2  id5    17
#&gt; 6   id2     7  id1     2
#&gt; 7   id2     7  id2     7
#&gt; 8   id2     7  id3    11
#&gt; 9   id2     7  id4    13
#&gt; 10  id2     7  id5    17
#&gt; 11  id3    11  id1     2
#&gt; 12  id3    11  id2     7
#&gt; 13  id3    11  id3    11
#&gt; 14  id3    11  id4    13
#&gt; 15  id3    11  id5    17
#&gt; 16  id4    13  id1     2
#&gt; 17  id4    13  id2     7
#&gt; 18  id4    13  id3    11
#&gt; 19  id4    13  id4    13
#&gt; 20  id4    13  id5    17
#&gt; 21  id5    17  id1     2
#&gt; 22  id5    17  id2     7
#&gt; 23  id5    17  id3    11
#&gt; 24  id5    17  id4    13
#&gt; 25  id5    17  id5    17</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nathan Eastwood.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


